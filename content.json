{"meta":{"title":"lyricsz1115 Blog","subtitle":"è®°å½•ç”Ÿæ´»ä¸æŠ€æœ¯","description":"è¿™æ˜¯ä¸€ä¸ªå…³äºæŠ€æœ¯åˆ†äº«å’Œç”Ÿæ´»è®°å½•çš„ä¸ªäººåšå®¢","author":"lyricsz1115","url":"https://lyricsz1115.github.io","root":"/"},"pages":[{"title":"æ–‡ç« åˆ†ç±»","date":"2025-11-28T14:30:00.000Z","updated":"2025-11-29T02:23:07.827Z","comments":true,"path":"categories/index.html","permalink":"https://lyricsz1115.github.io/categories/index.html","excerpt":"","text":""},{"title":"æˆ‘çš„å°ä¼™ä¼´ä»¬","date":"2025-11-29T02:00:00.000Z","updated":"2025-11-29T02:43:26.007Z","comments":true,"path":"friends/index.html","permalink":"https://lyricsz1115.github.io/friends/index.html","excerpt":"","text":""},{"title":"çƒ­é—¨æ ‡ç­¾","date":"2025-11-28T14:30:00.000Z","updated":"2025-11-29T02:23:07.827Z","comments":true,"path":"tags/index.html","permalink":"https://lyricsz1115.github.io/tags/index.html","excerpt":"","text":""},{"title":"å…³äºæˆ‘","date":"2025-11-28T14:30:00.000Z","updated":"2025-11-29T05:59:07.391Z","comments":true,"path":"about/index.html","permalink":"https://lyricsz1115.github.io/about/index.html","excerpt":"","text":"ğŸ™‹â€â™‚ï¸ ä½ å¥½ï¼Œæˆ‘æ˜¯ lyricsz1115è¿™é‡Œæ˜¯æˆ‘çš„ä¸ªäººåšå®¢ï¼Œæˆ‘åœ¨2025å¹´11æœˆ28æ—¥ç¬¬ä¸€æ¬¡åˆ›å»ºäº†å®ƒï¼Œæš‚æ—¶ç”¨äºè®°å½•æˆ‘ç›®å‰çš„ä¸€äº›æ€è€ƒå’Œå­¦ä¹ å†…å®¹å§ã€‚ ğŸ“« è”ç³»æˆ‘ GitHub: lyricsz1115 Email: &#x32;&#x30;&#56;&#x38;&#55;&#51;&#x33;&#x34;&#x35;&#50;&#x40;&#x71;&#113;&#46;&#99;&#111;&#x6d; æ›´æ–°&#x2F;å­¦ä¹ æ—¥å¿—2025.11.281.åˆ›å»ºåšå®¢ï¼ŒåŒ…æ‹¬ä¸‹è½½gitï¼Œnode.jsï¼Œå®‰è£…hexoï¼Œæ›´æ¢themeç­‰2.è®¾ç½®äº†coverä¸Šçš„å‡ ä¸ªé€‰é¡¹ï¼Œä½¿å…¶ä¸æ˜¯404ï¼Œèƒ½æ­£å¸¸è·³è½¬3.å­¦ä¼šäº†ç”¨vscodeæ‰“å¼€sourceä¸­çš„aboutï¼Œcategoryç­‰ä¿®æ”¹å‡ ä¸ªcoveræŒ‰é’®ä¸­çš„å†…å®¹ 2025.11.291.å­¦ä¼šäº†å†™ç¬¬ä¸€ç¯‡åšå®¢ï¼Œç”¨mdè¯­æ³•2.äº†è§£äº†åˆ†ç±»ï¼Œæ ‡ç­¾å’Œä¾§è¾¹æ çš„å¯¹åº”ï¼ŒæˆåŠŸå°†ä¾§è¾¹æ çš„æ ‡ç­¾å’Œåˆ†ç±»æ›´æ–°åˆ°menuä¸­3.Windowsè‡ªå¸¦å¿«æ·é”®æŸ¥æ‰¾emoji4.é…ç½®äº†è¯„è®ºç³»ç»Ÿï¼Œç”¨giscus5.æˆåŠŸåˆ›å»ºäº†å‹é“¾ï¼Œç›®å‰åªæ”¾ä¸€äº›æˆ‘è§‰å¾—èƒ½å¤Ÿå­¦ä¹ åˆ°çš„å¤§ä½¬çš„åšå®¢ï¼Œæš‚æ—¶æ— å°ä¼™ä¼´åšå®¢6.çœŸæ­£äº†è§£åˆ°hexo cleanï¼Œhexo gï¼Œhexo sï¼Œhexo dçš„æ„ä¹‰7.æ›´æ”¹èƒŒæ™¯å’Œä¾§è¾¹æ å¤´åƒï¼Œtitleï¼Œéƒ½åœ¨coveré‡Œä¿®æ”¹çš„ã€‚å¯ä»¥ç”¨æœ¬åœ°è·¯å¾„æˆ–è€…ç½‘ç»œé“¾æ¥8.å°†åšæ–‡æ ‡é¢˜ä¸‹é¢çš„ä½œè€…å’Œå¤´åƒè®¾ç½®å¥½äº†10.å»æ‰äº†â€é˜…è¯»å…¨æ–‡â€çš„æŒ‰é’®ï¼Œæ”¹ä¸ºç›´æ¥ç‚¹å‡»æ–‡å­—éƒ¨åˆ†å°±å¯ä»¥è¿›å…¥åˆ°åšæ–‡ä¸­11.åœ¨é¦–é¡µæ¯ç¯‡åšæ–‡çš„åº•éƒ¨éƒ½åŠ ä¸Šäº†æ–‡ç« å­—æ•°å’Œé˜…è¯»æ—¶é—´ï¼Œå¹¶å‘å³å¯¹é½12.åœ¨ä¾§è¾¹æ åŠ ä¸Šäº†ç«™ç‚¹ä¿¡æ¯å’ŒéŸ³ä¹çš„å°ç»„ä»¶ï¼Œå¹¶ä¸”è®¾ç½®äº†æˆ‘è‡ªå·±çš„æ­Œå•ï¼Œä½†æ˜¯è¦vipçš„éŸ³ä¹æ˜¯æ’­æ”¾ä¸äº†çš„ï¼Œæœ‰ç‚¹å¯æƒœ13.è®¾ç½®äº†å‹é“¾çš„featuresæŒ‰é’®ï¼Œå¹¶æ¢äº†ä¸€ä¸ªæ›´å¥½çœ‹çš„å›¾æ ‡ æ„Ÿè§‰ç›®å‰å¤§æ¦‚å°±è¿™ä¹ˆå¤šäº†ï¼Œç­‰æœ‰äº†æ›´å¥½çš„æƒ³æ³•å†ç»§ç»­æ›´æ–°ã€‚æœ€è¿‘å¯ä»¥å¼€å§‹å†™åšå®¢å†…å®¹äº†ğŸ˜"}],"posts":[{"title":"æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢","slug":"æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢","date":"2025-11-29T01:36:58.000Z","updated":"2025-11-29T02:27:18.784Z","comments":true,"path":"2025/11/29/æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢/","permalink":"https://lyricsz1115.github.io/2025/11/29/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/","excerpt":"","text":"æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢ğŸ˜‹å¾ˆé«˜å…´èƒ½å¤Ÿæ ¹æ®ç½‘ä¸Šçš„æ•™ç¨‹è‡ªå·±â€œæ­â€äº†ä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢ï¼Œè™½ç„¶ç”¨äº†ä¸€äº›æ—¶é—´ä½†æ˜¯æˆåŠŸçš„æ—¶å€™è¿˜æ˜¯å¾ˆä»¤äººå…´å¥‹çš„ã€‚ç›®å‰æˆ‘çš„æ‰“ç®—æ˜¯åœ¨è¿™é‡Œè®°å½•ä¸€äº›æˆ‘ç”Ÿæ´»ä¸­çš„æ‰€è§æ‰€é—»ï¼Œæ„Ÿæƒ³å’Œä¸€äº›å­¦ä¹ ä¸Šé‡åˆ°çš„é—®é¢˜æˆ–å…¶ä»–æœ‰è¶£çš„ä¸œè¥¿å¸Œæœ›å®ƒèƒ½æˆä¸ºæˆ‘çš„ä¸€ä¸ªæ—¥è®°æœ¬ä¹‹ç±»çš„ä¸œè¥¿ï¼Ÿæ€»ä¹‹è‚¯å®šä¼šæ˜¯ä¸€ä¸ªæˆ‘æ…¢æ…¢è¿›æ­¥æˆé•¿çš„ä½“ç°å§","categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"https://lyricsz1115.github.io/categories/%E9%9A%8F%E7%AC%94/"}],"tags":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://lyricsz1115.github.io/tags/%E7%94%9F%E6%B4%BB/"}]},{"title":"Hello World","slug":"hello-world","date":"2025-11-27T16:00:00.000Z","updated":"2025-11-29T11:32:33.695Z","comments":true,"path":"2025/11/28/hello-world/","permalink":"https://lyricsz1115.github.io/2025/11/28/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post.Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]},{"title":"å¼‚æ­¥ç¼–ç¨‹å­¦ä¹ ","slug":"å¼‚æ­¥ç¼–ç¨‹å­¦ä¹ ","date":"2025-02-05T07:52:30.000Z","updated":"2026-02-05T08:02:07.316Z","comments":true,"path":"2025/02/05/å¼‚æ­¥ç¼–ç¨‹å­¦ä¹ /","permalink":"https://lyricsz1115.github.io/2025/02/05/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0/","excerpt":"","text":"å¼‚æ­¥ç¼–ç¨‹random.uniform(0.5, 2.0)å’Œrandom.randint(100, 999)çš„ä¸åŒï¼šuniform æ˜¯ç”Ÿæˆå¸¦å°æ•°ç‚¹çš„æ•°å­—ï¼ˆæµ®ç‚¹æ•°ï¼‰ï¼ŒåŒ…å«å°æ•°ç‚¹åå¾ˆå¤šä½ã€‚è€Œ randint æ˜¯ç”Ÿæˆä¸å¸¦å°æ•°ç‚¹çš„æ•´æ•°ã€‚ é…å¥—ä»£ç : 01_å¼‚æ­¥ç¼–ç¨‹.pyå­¦ä¹ æ—¶é—´: 2å°æ—¶éš¾åº¦: â­â­â­ ğŸ“š ç¬¬1æ­¥ï¼šç†è§£æ ¸å¿ƒæ¦‚å¿µä»€ä¹ˆæ˜¯å¼‚æ­¥ç¼–ç¨‹ï¼Ÿç”Ÿæ´»ç±»æ¯”ï¼šåšé¥­çš„è¿‡ç¨‹ åŒæ­¥æ–¹å¼ï¼ˆä¼ ç»Ÿç¼–ç¨‹ï¼‰ï¼š 12341. çƒ§æ°´ â†’ ç­‰10åˆ†é’Ÿæ°´å¼€2. åˆ‡èœ â†’ ç­‰5åˆ†é’Ÿåˆ‡å®Œ3. ç‚’èœ â†’ ç­‰8åˆ†é’Ÿç‚’å®Œæ€»æ—¶é—´ï¼š23åˆ†é’Ÿ å¼‚æ­¥æ–¹å¼ï¼š 12341. å¼€å§‹çƒ§æ°´ï¼ˆä¸ç­‰ï¼Œç»§ç»­ä¸‹ä¸€æ­¥ï¼‰2. åˆ‡èœï¼ˆçƒ§æ°´åŒæ—¶è¿›è¡Œï¼‰3. æ°´å¼€äº† + èœåˆ‡å¥½äº† â†’ ç‚’èœæ€»æ—¶é—´ï¼š10åˆ†é’Ÿï¼ˆæ—¶é—´é‡å ï¼‰ ç¼–ç¨‹ä¸­çš„ä¾‹å­ï¼š 123456789# åŒæ­¥ï¼šä¸€ä¸ªæ¥ä¸€ä¸ªresponse1 = è¯·æ±‚API1() # ç­‰2ç§’response2 = è¯·æ±‚API2() # ç­‰2ç§’response3 = è¯·æ±‚API3() # ç­‰2ç§’# æ€»æ—¶é—´ï¼š6ç§’# å¼‚æ­¥ï¼šåŒæ—¶è¿›è¡Œresponses = await åŒæ—¶è¯·æ±‚[API1, API2, API3]# æ€»æ—¶é—´ï¼š2ç§’ï¼ˆæœ€é•¿çš„é‚£ä¸ªï¼‰ å¼‚æ­¥ç¼–ç¨‹æœ€æ ¸å¿ƒçš„é€‚ç”¨åœºæ™¯å¯ä»¥ç”¨å››ä¸ªå­—æ¦‚æ‹¬ï¼šâ€œIO å¯†é›†å‹â€ã€‚ ç®€å•æ¥è¯´ï¼Œåªè¦ä½ çš„ç¨‹åºå¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨â€œç­‰â€ï¼ˆç­‰ç½‘ç»œè¿”å›ã€ç­‰æ•°æ®åº“ç»“æœã€ç­‰æ–‡ä»¶è¯»å–ï¼‰ï¼Œè€Œä¸æ˜¯åœ¨â€œç®—â€ï¼ˆç®—æ•°å­¦é¢˜ã€å›¾åƒå¤„ç†ã€åŠ å¯†è§£å¯†ï¼‰ï¼Œå¼‚æ­¥ç¼–ç¨‹å°±èƒ½å‘æŒ¥å·¨å¤§çš„å¨åŠ›ã€‚ ä»¥ä¸‹æ˜¯å‡ ä¸ªå…·ä½“çš„åº”ç”¨åœºæ™¯ï¼š 1. ç½‘ç»œçˆ¬è™«ï¼ˆæœ€å…¸å‹ï¼‰ åœºæ™¯æè¿°ï¼šä½ éœ€è¦æŠ“å– 1000 ä¸ªç½‘é¡µã€‚ ä¸ºä»€ä¹ˆç”¨å¼‚æ­¥ï¼šæŠ“å–ç½‘é¡µæ—¶ï¼Œ99% çš„æ—¶é—´éƒ½èŠ±åœ¨â€œç­‰å¾…æœåŠ¡å™¨å“åº”â€ä¸Šã€‚ æ•ˆæœï¼šåŒæ­¥çˆ¬è™«å¿…é¡»ä¸€ä¸ªæ¥ä¸€ä¸ªæŠ“ï¼ˆè€—æ—¶å¯èƒ½ 10 åˆ†é’Ÿï¼‰ï¼›å¼‚æ­¥çˆ¬è™«å¯ä»¥åŒæ—¶å‘èµ·å‡ ç™¾ä¸ªè¯·æ±‚ï¼ˆè€—æ—¶å¯èƒ½åªè¦ 10 ç§’ï¼‰ã€‚ 2. é«˜å¹¶å‘çš„ API æœåŠ¡ï¼ˆWeb åç«¯ï¼‰ åœºæ™¯æè¿°ï¼šä½ å†™äº†ä¸€ä¸ªåç«¯æ¥å£ï¼Œè¿™ä¸ªæ¥å£éœ€è¦æŸ¥è¯¢æ•°æ®åº“ï¼Œæˆ–è€…è°ƒç”¨å¦å¤–ä¸‰ä¸ªå¾®æœåŠ¡çš„æ¥å£ã€‚ ä¸ºä»€ä¹ˆç”¨å¼‚æ­¥ï¼šå¦‚æœç”¨åŒæ­¥æ¡†æ¶ï¼ˆå¦‚ Flaskï¼‰ï¼Œæ¯ä¸€ä¸ªç”¨æˆ·è¯·æ±‚éƒ½ä¼šå æ­»ä¸€ä¸ªè¿›ç¨‹&#x2F;çº¿ç¨‹ã€‚å¦‚æœæ•°æ®åº“å¾ˆæ…¢ï¼Œæ–°ç”¨æˆ·å°±è¿›ä¸æ¥äº†ã€‚ æ•ˆæœï¼šä½¿ç”¨å¼‚æ­¥æ¡†æ¶ï¼ˆå¦‚ FastAPIã€Sanicï¼‰ï¼Œä¸€ä¸ªæœåŠ¡è¿›ç¨‹å¯ä»¥åŒæ—¶å¤„ç†æ•°åƒä¸ªæŒ‚èµ·çš„è¯·æ±‚ï¼Œæå¤§åœ°æå‡äº†æœåŠ¡å™¨çš„ååé‡ã€‚ 3. å³æ—¶é€šè®¯ä¸é•¿è¿æ¥ åœºæ™¯æè¿°ï¼šèŠå¤©å®¤ï¼ˆWebsocketï¼‰ã€æ¶ˆæ¯æ¨é€ç³»ç»Ÿã€‚ ä¸ºä»€ä¹ˆç”¨å¼‚æ­¥ï¼šè¿™ç±»åº”ç”¨éœ€è¦ç»´æŒæˆåƒä¸Šä¸‡ä¸ªè¿æ¥ï¼Œä½†å¤§éƒ¨åˆ†æ—¶é—´è¿™äº›è¿æ¥éƒ½æ˜¯å®‰é™çš„ï¼ˆç”¨æˆ·æ²¡å‘æ¶ˆæ¯ï¼‰ã€‚ æ•ˆæœï¼šå¼‚æ­¥ç¼–ç¨‹å¯ä»¥ç”¨æå°‘çš„èµ„æºç»´æŒæµ·é‡çš„è¿æ¥ï¼Œè€Œä¸éœ€è¦ä¸ºæ¯ä¸ªç”¨æˆ·å¼€ä¸€ä¸ªæ˜‚è´µçš„çº¿ç¨‹ã€‚ 4. æ•°æ®åº“æ“ä½œ åœºæ™¯æè¿°ï¼šå¤§é‡çš„å°æ•°æ®è¯»å†™ï¼ˆCRUDï¼‰ã€‚ ä¸ºä»€ä¹ˆç”¨å¼‚æ­¥ï¼šç£ç›˜ IO å’Œç½‘ç»œ IO ç±»ä¼¼ï¼ŒCPU å‘å‡ºæŒ‡ä»¤åå°±å¯ä»¥å¹²åˆ«çš„äº‹äº†ï¼Œç­‰ç¡¬ç›˜è½¬å¥½æ•°æ®å†å›æ¥å¤„ç†ã€‚ âš ï¸ åé¢æ•™æï¼šä»€ä¹ˆæ—¶å€™ä¸è¯¥ç”¨å¼‚æ­¥ï¼Ÿå¦‚æœä½ çš„åœºæ™¯æ˜¯ â€œCPU å¯†é›†å‹â€ï¼Œå¼‚æ­¥ç¼–ç¨‹ä¸ä»…æ²¡ç”¨ï¼Œåè€Œæœ‰å®³ã€‚ å›¾åƒå¤„ç†&#x2F;è§†é¢‘å‰ªè¾‘ï¼šéœ€è¦æ¶ˆè€—å¤§é‡ CPU è®¡ç®—åƒç´ ã€‚ ç§‘å­¦è®¡ç®—&#x2F;æœºå™¨å­¦ä¹ ï¼šå¦‚çŸ©é˜µè¿ç®—ã€‚ å¤§è§„æ¨¡æ•°æ®åŠ å¯†ã€‚ ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ1. äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ ä¸€ä¸ªâ€è°ƒåº¦å™¨â€ï¼Œç®¡ç†æ‰€æœ‰å¼‚æ­¥ä»»åŠ¡ ä¸æ–­å¾ªç¯æ£€æŸ¥ï¼šå“ªäº›ä»»åŠ¡å®Œæˆäº†ï¼Ÿå“ªäº›å¯ä»¥ç»§ç»­ï¼Ÿ ç±»æ¯”ï¼šé¤å…æœåŠ¡å‘˜ 1234567æœåŠ¡å‘˜ï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ï¼š1. æ¥æ”¶è®¢å•A â†’ äº¤ç»™å¨æˆ¿2. æ¥æ”¶è®¢å•B â†’ äº¤ç»™å¨æˆ¿3. è®¢å•Aå®Œæˆ â†’ é€ç»™å®¢äºº4. æ¥æ”¶è®¢å•C â†’ äº¤ç»™å¨æˆ¿5. è®¢å•Bå®Œæˆ â†’ é€ç»™å®¢äºº...æŒç»­å¾ªç¯ ä»£ç ç¤ºä¾‹ï¼š 1234import asyncio# äº‹ä»¶å¾ªç¯è‡ªåŠ¨ç®¡ç†ï¼Œä½ åªéœ€è¦ï¼šasyncio.run(main()) # å¯åŠ¨äº‹ä»¶å¾ªç¯ï¼Œè¿è¡Œ main() 2. åç¨‹ï¼ˆCoroutineï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ å¯ä»¥æš‚åœå’Œæ¢å¤çš„å‡½æ•° ç”¨ async def å®šä¹‰ ç±»æ¯”ï¼šå¯æš‚åœçš„è§†é¢‘ 12æ™®é€šå‡½æ•° = å¿…é¡»çœ‹å®Œçš„ç›´æ’­ï¼ˆä¸èƒ½æš‚åœï¼‰åç¨‹ = å½•æ’­è§†é¢‘ï¼ˆå¯ä»¥æš‚åœã€ç»§ç»­ã€å¿«è¿›ï¼‰ ä»£ç ç¤ºä¾‹ï¼š 1234567891011# æ™®é€šå‡½æ•°def normal_function(): print(&quot;å¼€å§‹&quot;) time.sleep(2) # é˜»å¡ï¼ä»€ä¹ˆéƒ½ä¸èƒ½åš print(&quot;ç»“æŸ&quot;)# åç¨‹ï¼ˆå¼‚æ­¥å‡½æ•°ï¼‰async def coroutine(): print(&quot;å¼€å§‹&quot;) await asyncio.sleep(2) # æš‚åœï¼ŒæœŸé—´å¯ä»¥åšå…¶ä»–äº‹ print(&quot;ç»“æŸ&quot;) 3. async&#x2F;await è¯­æ³•async def å£°æ˜è¿™æ˜¯ä¸€ä¸ªåç¨‹ï¼ˆå¼‚æ­¥å‡½æ•°ï¼‰ è¿”å›çš„æ˜¯ä¸€ä¸ªâ€å¯ç­‰å¾…å¯¹è±¡â€ await â€œç­‰å¾…â€æŸä¸ªå¼‚æ­¥æ“ä½œå®Œæˆï¼Œæ‹¿åˆ°è¿”å›å€¼å†æ¥ç€å¾€ä¸‹èµ° æš‚åœå½“å‰åç¨‹ï¼Œè®©å…¶ä»–åç¨‹è¿è¡Œ åªèƒ½åœ¨ async å‡½æ•°å†…ä½¿ç”¨ ä»£ç ç¤ºä¾‹ï¼š 12345678async def fetch_data(url): print(f&quot;å¼€å§‹è¯·æ±‚: &#123;url&#125;&quot;) await asyncio.sleep(2) # æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ print(f&quot;å®Œæˆè¯·æ±‚: &#123;url&#125;&quot;) return f&quot;Data from &#123;url&#125;&quot;# è¿è¡Œåç¨‹asyncio.run(fetch_data(&quot;http://api.com&quot;)) ğŸ’» ç¬¬2æ­¥ï¼šçœ‹ä»£ç å…³é”®éƒ¨åˆ†æ‰“å¼€ 01_å¼‚æ­¥ç¼–ç¨‹.pyï¼ŒæŒ‰ä»¥ä¸‹é¡ºåºé˜…è¯»ï¼š éƒ¨åˆ†1ï¼šæœ€ç®€å•çš„åç¨‹ï¼ˆç¬¬10-15è¡Œï¼‰12345async def hello(): &quot;&quot;&quot;å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°&quot;&quot;&quot; print(&quot;Hello&quot;) await asyncio.sleep(1) # æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ print(&quot;World&quot;) ç†è§£è¦ç‚¹ï¼š async def &#x3D; è¿™æ˜¯ä¸€ä¸ªåç¨‹ await asyncio.sleep(1) &#x3D; æš‚åœ1ç§’ï¼ŒæœŸé—´å…¶ä»–ä»£ç å¯ä»¥è¿è¡Œ å’Œ time.sleep(1) çš„åŒºåˆ«ï¼šåè€…ä¼šé˜»å¡æ‰€æœ‰ä»£ç  è¿è¡Œæ–¹å¼ï¼š 1asyncio.run(hello()) éƒ¨åˆ†2ï¼šå¹¶å‘æ‰§è¡Œï¼ˆç¬¬18-40è¡Œï¼‰1234567891011121314151617181920async def fetch_data(url: str) -&gt; str: &quot;&quot;&quot;æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚&quot;&quot;&quot; print(f&quot;æ­£åœ¨è¯·æ±‚: &#123;url&#125;&quot;) await asyncio.sleep(2) # æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ return f&quot;Data from &#123;url&#125;&quot;async def fetch_multiple_urls(): &quot;&quot;&quot;å¹¶å‘è¯·æ±‚å¤šä¸ªURL&quot;&quot;&quot; urls = [&quot;http://api1.com&quot;, &quot;http://api2.com&quot;, &quot;http://api3.com&quot;] # åˆ›å»ºåç¨‹åˆ—è¡¨ tasks = [fetch_data(url) for url in urls] # å¹¶å‘æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡ start = time.time() results = await asyncio.gather(*tasks) elapsed = time.time() - start print(f&quot;å¹¶å‘æ‰§è¡Œè€—æ—¶: &#123;elapsed:.2f&#125;ç§’&quot;) return results ç†è§£è¦ç‚¹ï¼š asyncio.gather(*tasks) &#x3D; åŒæ—¶è¿è¡Œæ‰€æœ‰ä»»åŠ¡ 3ä¸ªä»»åŠ¡å„2ç§’ &#x3D; é¡ºåºéœ€è¦6ç§’ï¼Œå¹¶å‘åªéœ€2ç§’ æ€§èƒ½æå‡3å€ï¼ éƒ¨åˆ†3ï¼šè¶…æ—¶æ§åˆ¶ï¼ˆç¬¬100-110è¡Œï¼‰1234567async def timeout_example(): &quot;&quot;&quot;è¶…æ—¶ç¤ºä¾‹&quot;&quot;&quot; try: result = await asyncio.wait_for(slow_operation(), timeout=2) print(result) except asyncio.TimeoutError: print(&quot;æ“ä½œè¶…æ—¶!&quot;) ç†è§£è¦ç‚¹ï¼š asyncio.wait_for() &#x3D; è®¾ç½®è¶…æ—¶æ—¶é—´ slow_operation()æŒ‡è¦æ‰§è¡Œçš„å¤§ä»»åŠ¡ timeout&#x3D;2ä¸ºé™å®šçš„æ—¶é—´ï¼Œå³2ç§’ è¶…è¿‡æ—¶é—´ä¼šæŠ›å‡º TimeoutError ç”¨äºé˜²æ­¢ä»»åŠ¡å¡æ­» éƒ¨åˆ†4ï¼šæ§åˆ¶å¹¶å‘æ•°ï¼ˆç¬¬200-220è¡Œï¼‰12345678910111213141516async def async_crawler(urls: List[str], max_concurrent: int = 3): &quot;&quot;&quot;å¼‚æ­¥çˆ¬è™«ï¼Œé™åˆ¶å¹¶å‘æ•°&quot;&quot;&quot; # ä¿¡å·é‡ï¼šæœ€å¤š3ä¸ªåŒæ—¶è¿è¡Œ semaphore = asyncio.Semaphore(max_concurrent) async def fetch_with_limit(url): async with semaphore: return await fetch_url(None, url) # åˆ›å»ºæ‰€æœ‰ä»»åŠ¡ tasks = [fetch_with_limit(url) for url in urls] # å¹¶å‘æ‰§è¡Œ results = await asyncio.gather(*tasks) return results ç†è§£è¦ç‚¹ï¼š Semaphore(3) &#x3D; ä¿¡å·é‡ï¼Œæœ€å¤š3ä¸ªåŒæ—¶è¿è¡Œ 10ä¸ªä»»åŠ¡ï¼Œä½†åŒæ—¶åªæœ‰3ä¸ªåœ¨è¿è¡Œ ç”¨äºé¿å…å¹¶å‘è¿‡å¤šå¯¼è‡´çš„é—®é¢˜ ğŸš€ ç¬¬3æ­¥ï¼šè¿è¡Œä»£ç çœ‹æ•ˆæœè¿è¡Œå®Œæ•´æ¼”ç¤º12cd d:\\AndroidStudioProjects\\AI_Learning_Week1-2\\01_Pythonæ·±åŒ–python 01_å¼‚æ­¥ç¼–ç¨‹.py è§‚å¯Ÿè¾“å‡ºï¼š 1234567891011121314151617181920212223242526==================================================1. åŸºç¡€å¼‚æ­¥å‡½æ•°==================================================HelloWorld==================================================2. å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡==================================================æ­£åœ¨è¯·æ±‚: http://api1.comæ­£åœ¨è¯·æ±‚: http://api2.comæ­£åœ¨è¯·æ±‚: http://api3.comé¡ºåºæ‰§è¡Œéœ€è¦ 6ç§’ï¼Œå¹¶å‘æ‰§è¡Œè€—æ—¶: 2.05ç§’ â† çœ‹è¿™é‡Œï¼==================================================6. å¼‚æ­¥çˆ¬è™« - 3ä¸ªå¹¶å‘==================================================[è¯·æ±‚] http://api0.com[è¯·æ±‚] http://api1.com[è¯·æ±‚] http://api2.com[ç­‰å¾…ç¬¬ä¸€æ‰¹å®Œæˆ...][è¯·æ±‚] http://api3.com...çˆ¬å– 10 ä¸ªURLè€—æ—¶: 4.02ç§’ â† æ³¨æ„è¿™ä¸ªï¼ é‡ç‚¹è§‚å¯Ÿï¼š å¹¶å‘æ‰§è¡Œçš„æ—¶é—´æ˜æ˜¾å‡å°‘ åŒæ—¶è¯·æ±‚çš„URLä¼šä¸€èµ·æ‰“å° ä¿¡å·é‡æ§åˆ¶çš„å¹¶å‘æ•°ï¼ˆæ¯æ¬¡åªæœ‰3ä¸ªï¼‰ ğŸ”§ ç¬¬4æ­¥ï¼šä¿®æ”¹ä»£ç å®éªŒå®éªŒ1ï¼šæ”¹å˜å¹¶å‘æ•°é‡æ‰¾åˆ°è¿™ä¸€è¡Œï¼ˆçº¦235è¡Œï¼‰ï¼š 1urls = [f&quot;http://api&#123;i&#125;.com&quot; for i in range(10)] æ”¹æˆï¼š 1urls = [f&quot;http://api&#123;i&#125;.com&quot; for i in range(20)] è¿è¡Œï¼Œè§‚å¯Ÿï¼š æ—¶é—´å˜åŒ– è¯·æ±‚æ•°é‡å˜åŒ– å®éªŒ2ï¼šæ”¹å˜ä¿¡å·é‡é™åˆ¶æ‰¾åˆ°è¿™ä¸€è¡Œï¼ˆçº¦235è¡Œï¼‰ï¼š 1await async_crawler(urls, max_concurrent=3) æ”¹æˆï¼š 1await async_crawler(urls, max_concurrent=10) è¿è¡Œï¼Œè§‚å¯Ÿï¼š åŒæ—¶è¿è¡Œçš„ä»»åŠ¡æ•°é‡ æ€»æ—¶é—´å˜åŒ– å®éªŒ3ï¼šæ”¹å˜ç­‰å¾…æ—¶é—´æ‰¾åˆ°è¿™ä¸€è¡Œï¼ˆçº¦195è¡Œï¼‰ï¼š 1await asyncio.sleep(1) æ”¹æˆï¼š 1await asyncio.sleep(5) è¿è¡Œï¼Œè§‚å¯Ÿï¼š æ€»æ—¶é—´å˜åŒ– å¹¶å‘çš„æ•ˆæœæ˜¯å¦è¿˜æ˜æ˜¾ âœï¸ ç¬¬5æ­¥ï¼šè‡ªå·±å†™ä»£ç ç»ƒä¹ 1ï¼šå¼‚æ­¥æ–‡ä»¶ä¸‹è½½ä»»åŠ¡ï¼šæ¨¡æ‹Ÿä¸‹è½½å¤šä¸ªæ–‡ä»¶ 12345678910111213141516171819202122232425262728293031import asyncioimport randomasync def download_file(filename: str) -&gt; str: &quot;&quot;&quot;æ¨¡æ‹Ÿæ–‡ä»¶ä¸‹è½½&quot;&quot;&quot; download_time = random.randint(1, 3) print(f&quot;å¼€å§‹ä¸‹è½½ &#123;filename&#125; (éœ€è¦&#123;download_time&#125;ç§’)&quot;) await asyncio.sleep(download_time) print(f&quot;âœ“ &#123;filename&#125; ä¸‹è½½å®Œæˆ&quot;) return f&quot;&#123;filename&#125; ä¸‹è½½å®Œæˆ&quot;async def main(): &quot;&quot;&quot;å¹¶å‘ä¸‹è½½å¤šä¸ªæ–‡ä»¶&quot;&quot;&quot; files = [ &quot;video.mp4&quot;, &quot;music.mp3&quot;, &quot;document.pdf&quot;, &quot;image.jpg&quot;, &quot;archive.zip&quot; ] # TODO: ä½¿ç”¨ asyncio.gather å¹¶å‘ä¸‹è½½ results = await asyncio.gather(*[download_file(f) for f in files]) print(&quot;\\næ‰€æœ‰ä¸‹è½½å®Œæˆï¼&quot;) return resultsif __name__ == &quot;__main__&quot;: asyncio.run(main()) ä¿å­˜ä¸º my_download.pyï¼Œè¿è¡Œæµ‹è¯•ã€‚ ç»ƒä¹ 2ï¼šå¸¦è¿›åº¦çš„å¼‚æ­¥ä»»åŠ¡ä»»åŠ¡ï¼šæ·»åŠ ä¸‹è½½è¿›åº¦æ˜¾ç¤º 12345678910111213141516171819202122232425262728import asyncioasync def download_with_progress(filename: str, total_size: int) -&gt; str: &quot;&quot;&quot;å¸¦è¿›åº¦çš„ä¸‹è½½&quot;&quot;&quot; downloaded = 0 while downloaded &lt; total_size: await asyncio.sleep(0.5) # æ¨¡æ‹Ÿä¸‹è½½ä¸€å— downloaded += 10 progress = (downloaded / total_size) * 100 print(f&quot;&#123;filename&#125;: &#123;progress:.1f&#125;%&quot;) print(f&quot;âœ“ &#123;filename&#125; å®Œæˆ&quot;) return filenameasync def main(): files = &#123; &quot;video.mp4&quot;: 100, &quot;music.mp3&quot;: 50, &quot;document.pdf&quot;: 30 &#125; # å¹¶å‘ä¸‹è½½ tasks = [download_with_progress(name, size) for name, size in files.items()] await asyncio.gather(*tasks)if __name__ == &quot;__main__&quot;: asyncio.run(main()) ç»ƒä¹ 3ï¼šå¼‚æ­¥APIè¯·æ±‚ï¼ˆçœŸå®åœºæ™¯ï¼‰ä»»åŠ¡ï¼šè¯·æ±‚å¤šä¸ªAPIå¹¶æ±‡æ€»ç»“æœ 123456789101112131415161718192021222324252627282930313233import asyncioimport aiohttp # éœ€è¦å®‰è£…: pip install aiohttpasync def fetch_api(session, url: str) -&gt; dict: &quot;&quot;&quot;çœŸå®çš„å¼‚æ­¥APIè¯·æ±‚&quot;&quot;&quot; try: async with session.get(url, timeout=5) as response: data = await response.json() print(f&quot;âœ“ &#123;url&#125;&quot;) return data except Exception as e: print(f&quot;âœ— &#123;url&#125;: &#123;e&#125;&quot;) return Noneasync def main(): &quot;&quot;&quot;å¹¶å‘è¯·æ±‚å¤šä¸ªAPI&quot;&quot;&quot; urls = [ &quot;https://api.github.com/users/octocat&quot;, &quot;https://api.github.com/users/torvalds&quot;, &quot;https://api.github.com/users/gvanrossum&quot;, ] async with aiohttp.ClientSession() as session: tasks = [fetch_api(session, url) for url in urls] results = await asyncio.gather(*tasks) # å¤„ç†ç»“æœ for result in results: if result: print(f&quot;ç”¨æˆ·: &#123;result.get(&#x27;login&#x27;)&#125;&quot;)if __name__ == &quot;__main__&quot;: asyncio.run(main()) ğŸ¯ ç¬¬6æ­¥ï¼šç†è§£å…³é”®ä»£ç ç‰‡æ®µä»£ç ç‰‡æ®µ1ï¼šåŸºç¡€å¼‚æ­¥å‡½æ•°123456789import asyncioasync def greet(name: str): print(f&quot;Hello, &#123;name&#125;&quot;) await asyncio.sleep(1) print(f&quot;Goodbye, &#123;name&#125;&quot;)# è¿è¡Œasyncio.run(greet(&quot;Alice&quot;)) è¾“å‡ºï¼š 123Hello, Alice[ç­‰å¾…1ç§’]Goodbye, Alice ä»£ç ç‰‡æ®µ2ï¼šå¹¶å‘æ‰§è¡Œ123456789101112131415161718async def task1(): print(&quot;Task 1 å¼€å§‹&quot;) await asyncio.sleep(2) print(&quot;Task 1 ç»“æŸ&quot;) return &quot;ç»“æœ1&quot;async def task2(): print(&quot;Task 2 å¼€å§‹&quot;) await asyncio.sleep(1) print(&quot;Task 2 ç»“æŸ&quot;) return &quot;ç»“æœ2&quot;async def main(): # å¹¶å‘æ‰§è¡Œ results = await asyncio.gather(task1(), task2()) print(f&quot;ç»“æœ: &#123;results&#125;&quot;)asyncio.run(main()) è¾“å‡ºï¼š 1234567Task 1 å¼€å§‹Task 2 å¼€å§‹[ç­‰å¾…1ç§’]Task 2 ç»“æŸ[å†ç­‰å¾…1ç§’]Task 1 ç»“æŸç»“æœ: [&#x27;ç»“æœ1&#x27;, &#x27;ç»“æœ2&#x27;] å…³é”®ç‚¹ï¼š ä¸¤ä¸ªä»»åŠ¡åŒæ—¶å¼€å§‹ Task 2 å…ˆç»“æŸï¼ˆåªéœ€1ç§’ï¼‰ æ€»æ—¶é—´ &#x3D; 2ç§’ï¼ˆä¸æ˜¯3ç§’ï¼‰ ä»£ç ç‰‡æ®µ3ï¼šé”™è¯¯å¤„ç†1234567891011async def risky_operation(): await asyncio.sleep(1) raise ValueError(&quot;å‡ºé”™äº†ï¼&quot;)async def safe_main(): try: result = await risky_operation() except ValueError as e: print(f&quot;æ•è·é”™è¯¯: &#123;e&#125;&quot;)asyncio.run(safe_main()) ğŸ“Š æ€§èƒ½å¯¹æ¯”å®éªŒï¼šå¯¹æ¯”åŒæ­¥å’Œå¼‚æ­¥åŒæ­¥ç‰ˆæœ¬ï¼š 12345678910111213141516import timedef fetch_sync(url): time.sleep(2) # é˜»å¡ return f&quot;Data from &#123;url&#125;&quot;def main_sync(): urls = [f&quot;http://api&#123;i&#125;.com&quot; for i in range(5)] start = time.time() results = [fetch_sync(url) for url in urls] elapsed = time.time() - start print(f&quot;åŒæ­¥è€—æ—¶: &#123;elapsed:.2f&#125;ç§’&quot;) # é¢„æœŸï¼š10ç§’main_sync() å¼‚æ­¥ç‰ˆæœ¬ï¼š 12345678910111213141516import asyncioasync def fetch_async(url): await asyncio.sleep(2) # ä¸é˜»å¡ return f&quot;Data from &#123;url&#125;&quot;async def main_async(): urls = [f&quot;http://api&#123;i&#125;.com&quot; for i in range(5)] start = time.time() results = await asyncio.gather(*[fetch_async(url) for url in urls]) elapsed = time.time() - start print(f&quot;å¼‚æ­¥è€—æ—¶: &#123;elapsed:.2f&#125;ç§’&quot;) # é¢„æœŸï¼š2ç§’asyncio.run(main_async()) ç»“æœå¯¹æ¯”ï¼š 123åŒæ­¥ï¼š10ç§’ï¼ˆ5ä¸ªä»»åŠ¡ Ã— 2ç§’ï¼‰å¼‚æ­¥ï¼š2ç§’ï¼ˆ5ä¸ªä»»åŠ¡åŒæ—¶è¿›è¡Œï¼‰æ€§èƒ½æå‡ï¼š5å€ï¼ â“ å¸¸è§é—®é¢˜Q1: async&#x2F;await å’Œå¤šçº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿç­”ï¼š 1234567891011å¼‚æ­¥ï¼ˆasync/awaitï¼‰ï¼š- å•çº¿ç¨‹- é€‚åˆIOå¯†é›†å‹ï¼ˆç½‘ç»œã€æ–‡ä»¶ï¼‰- æ›´è½»é‡ï¼Œå¼€é”€å°- Pythonæ¨èæ–¹å¼å¤šçº¿ç¨‹ï¼š- å¤šä¸ªçº¿ç¨‹- é€‚åˆCPUå¯†é›†å‹ï¼ˆè®¡ç®—ï¼‰- æœ‰GILé™åˆ¶ï¼ˆPythonä¸­ï¼‰- å¼€é”€è¾ƒå¤§ Q2: ä»€ä¹ˆæ—¶å€™ç”¨å¼‚æ­¥ï¼Ÿç­”ï¼š 12345678910é€‚åˆå¼‚æ­¥ï¼šâœ… ç½‘ç»œè¯·æ±‚ï¼ˆAPIã€çˆ¬è™«ï¼‰âœ… æ–‡ä»¶IOæ“ä½œâœ… æ•°æ®åº“æŸ¥è¯¢âœ… å¤§é‡ç­‰å¾…çš„æ“ä½œä¸é€‚åˆå¼‚æ­¥ï¼šâŒ CPUå¯†é›†å‹è®¡ç®—âŒ ç®€å•çš„åŒæ­¥é€»è¾‘âŒ ä¸æ¶‰åŠç­‰å¾…çš„æ“ä½œ Q3: ä¸ºä»€ä¹ˆä¸èƒ½åœ¨å¼‚æ­¥å‡½æ•°é‡Œç”¨ time.sleep()ï¼Ÿç­”ï¼š 1234567# âŒ é”™è¯¯ï¼šä¼šé˜»å¡æ•´ä¸ªäº‹ä»¶å¾ªç¯async def bad(): time.sleep(1) # é˜»å¡ï¼å…¶ä»–åç¨‹ä¹Ÿæ— æ³•è¿è¡Œ# âœ… æ­£ç¡®ï¼šä½¿ç”¨ asyncio.sleep()async def good(): await asyncio.sleep(1) # æš‚åœï¼Œå…¶ä»–åç¨‹å¯ä»¥è¿è¡Œ Q4: å¦‚ä½•è°ƒè¯•å¼‚æ­¥ä»£ç ï¼Ÿç­”ï¼š 123456789101112131415# æ–¹æ³•1ï¼šæ·»åŠ æ‰“å°async def debug_task(): print(&quot;å¼€å§‹&quot;) await asyncio.sleep(1) print(&quot;ä¸­é—´&quot;) await asyncio.sleep(1) print(&quot;ç»“æŸ&quot;)# æ–¹æ³•2ï¼šä½¿ç”¨ asyncio çš„è°ƒè¯•æ¨¡å¼import asyncioasyncio.run(main(), debug=True)# æ–¹æ³•3ï¼šä½¿ç”¨æ—¥å¿—import logginglogging.basicConfig(level=logging.DEBUG) ğŸ“ æ£€éªŒç†è§£å®Œæˆä»¥ä¸‹æ£€æŸ¥ï¼Œç¡®è®¤ä½ çœŸæ­£ç†è§£äº†ï¼š ç†è®ºæ£€æŸ¥ èƒ½ç”¨è‡ªå·±çš„è¯è§£é‡Šä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ èƒ½è¯´å‡ºåç¨‹å’Œæ™®é€šå‡½æ•°çš„åŒºåˆ« èƒ½è§£é‡Š await çš„ä½œç”¨ èƒ½è¯´å‡ºå¼‚æ­¥ç¼–ç¨‹çš„é€‚ç”¨åœºæ™¯ ä»£ç æ£€æŸ¥ èƒ½å†™å‡ºæœ€ç®€å•çš„ async def å‡½æ•° èƒ½ä½¿ç”¨ asyncio.gather å¹¶å‘æ‰§è¡Œä»»åŠ¡ èƒ½ä½¿ç”¨ä¿¡å·é‡æ§åˆ¶å¹¶å‘æ•° èƒ½å¤„ç†å¼‚æ­¥ä»£ç ä¸­çš„é”™è¯¯ å®è·µæ£€æŸ¥ å®Œæˆäº†ç»ƒä¹ 1ï¼ˆå¼‚æ­¥ä¸‹è½½ï¼‰ å®Œæˆäº†ç»ƒä¹ 2ï¼ˆè¿›åº¦æ˜¾ç¤ºï¼‰ ç†è§£äº†æ€§èƒ½æå‡çš„åŸç† èƒ½ç‹¬ç«‹å†™ä¸€ä¸ªå¼‚æ­¥çˆ¬è™« ğŸš€ ä¸‹ä¸€æ­¥å®Œæˆæœ¬æ¨¡å—åï¼š å¤ä¹ ï¼ˆDay 2ï¼‰ï¼šå†è¿è¡Œä¸€éä»£ç ï¼Œå°è¯•ç»ƒä¹ 3 åº”ç”¨ï¼ˆWeek 1é¡¹ç›®ï¼‰ï¼šåœ¨é¡¹ç›®1ä¸­ä½¿ç”¨å¼‚æ­¥çˆ¬è™« è¿›é˜¶ï¼ˆåç»­ï¼‰ï¼šå­¦ä¹  aiohttpã€aiofiles ç­‰å¼‚æ­¥åº“ ğŸ“š æ‰©å±•èµ„æº Pythonå®˜æ–¹æ–‡æ¡£: https://docs.python.org/3/library/asyncio.html Real Pythonæ•™ç¨‹: https://realpython.com/async-io-python/ asyncioé€ŸæŸ¥è¡¨: æœç´¢ â€œasyncio cheat sheetâ€ é…å¥—ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317import asyncioimport timefrom typing import List, Coroutine# ============ åŸºç¡€çŸ¥è¯† ============# 1. æœ€ç®€å•çš„åç¨‹async def hello(): &quot;&quot;&quot;å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°&quot;&quot;&quot; print(&quot;Hello&quot;) await asyncio.sleep(1) # æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ print(&quot;World&quot;)# 2. è¿”å›å€¼çš„åç¨‹async def fetch_data(url: str) -&gt; str: &quot;&quot;&quot;æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚&quot;&quot;&quot; print(f&quot;æ­£åœ¨è¯·æ±‚: &#123;url&#125;&quot;) await asyncio.sleep(2) # æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ return f&quot;Data from &#123;url&#125;&quot;# ============ å¹¶å‘æ‰§è¡Œ ============# æ–¹å¼1ï¼šasyncio.gather - å¹¶å‘å¤šä¸ªä»»åŠ¡async def fetch_multiple_urls(): &quot;&quot;&quot;å¹¶å‘è¯·æ±‚å¤šä¸ªURL&quot;&quot;&quot; urls = [&quot;http://api1.com&quot;, &quot;http://api2.com&quot;, &quot;http://api3.com&quot;] # åˆ›å»ºåç¨‹åˆ—è¡¨ tasks = [fetch_data(url) for url in urls] # å¹¶å‘æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡ start = time.time() results = await asyncio.gather(*tasks) elapsed = time.time() - start print(f&quot;\\né¡ºåºæ‰§è¡Œéœ€è¦ 6ç§’ï¼Œå¹¶å‘æ‰§è¡Œè€—æ—¶: &#123;elapsed:.2f&#125;ç§’&quot;) return results# æ–¹å¼2ï¼šasyncio.create_task - åˆ›å»ºåå°ä»»åŠ¡async def background_task_example(): &quot;&quot;&quot;åå°ä»»åŠ¡ç¤ºä¾‹&quot;&quot;&quot; async def background_worker(): for i in range(3): print(f&quot;åå°ä»»åŠ¡æ‰§è¡Œä¸­... &#123;i&#125;&quot;) await asyncio.sleep(1) return &quot;åå°å®Œæˆ&quot; # åˆ›å»ºä»»åŠ¡ï¼ˆç«‹å³å¼€å§‹æ‰§è¡Œï¼‰ task = asyncio.create_task(background_worker()) print(&quot;ä¸»ä»»åŠ¡ç»§ç»­æ‰§è¡Œ&quot;) await asyncio.sleep(0.5) # ç­‰å¾…ä»»åŠ¡å®Œæˆ result = await task print(f&quot;ç»“æœ: &#123;result&#125;&quot;)# ============ è¶…æ—¶æ§åˆ¶ ============async def slow_operation(): &quot;&quot;&quot;ç¼“æ…¢çš„æ“ä½œ&quot;&quot;&quot; await asyncio.sleep(5) return &quot;å®Œæˆ&quot;async def timeout_example(): &quot;&quot;&quot;è¶…æ—¶ç¤ºä¾‹&quot;&quot;&quot; try: # 3ç§’å†…å®Œæˆï¼Œå¦åˆ™æŠ›å‡ºTimeoutError result = await asyncio.wait_for(slow_operation(), timeout=2) print(result) except asyncio.TimeoutError: print(&quot;æ“ä½œè¶…æ—¶!&quot;)# ============ é«˜çº§ç‰¹æ€§ ============# 1. ä¸Šä¸‹æ–‡ç®¡ç†å™¨ (å¼‚æ­¥withè¯­å¥)class AsyncResource: &quot;&quot;&quot;å¼‚æ­¥èµ„æºç®¡ç†&quot;&quot;&quot; async def __aenter__(self): print(&quot;è·å–èµ„æº...&quot;) await asyncio.sleep(0.5) return self async def __aexit__(self, exc_type, exc_val, exc_tb): print(&quot;é‡Šæ”¾èµ„æº...&quot;) await asyncio.sleep(0.5)async def async_context_manager(): &quot;&quot;&quot;ä½¿ç”¨å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨&quot;&quot;&quot; async with AsyncResource() as resource: print(&quot;ä½¿ç”¨èµ„æº...&quot;) await asyncio.sleep(0.5)# 2. å¼‚æ­¥è¿­ä»£å™¨class AsyncCounter: &quot;&quot;&quot;å¼‚æ­¥è¿­ä»£å™¨ç¤ºä¾‹&quot;&quot;&quot; def __init__(self, max_value): self.current = 0 self.max_value = max_value def __aiter__(self): return self async def __anext__(self): if self.current &gt;= self.max_value: raise StopAsyncIteration self.current += 1 await asyncio.sleep(0.5) # æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ return self.currentasync def async_iterator_example(): &quot;&quot;&quot;å¼‚æ­¥è¿­ä»£ç¤ºä¾‹&quot;&quot;&quot; counter = AsyncCounter(3) async for value in counter: print(f&quot;å€¼: &#123;value&#125;&quot;)# ============ å®æˆ˜æ¡ˆä¾‹ï¼šå¼‚æ­¥çˆ¬è™« ============async def fetch_url(session, url: str) -&gt; str: &quot;&quot;&quot;å¼‚æ­¥è·å–URLå†…å®¹ï¼ˆæ¨¡æ‹Ÿï¼‰&quot;&quot;&quot; print(f&quot;[è¯·æ±‚] &#123;url&#125;&quot;) await asyncio.sleep(1) # æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ return f&quot;âœ“ &#123;url&#125;&quot;async def async_crawler(urls: List[str], max_concurrent: int = 3): &quot;&quot;&quot; å¼‚æ­¥çˆ¬è™« Args: urls: URLåˆ—è¡¨ max_concurrent: æœ€å¤§å¹¶å‘æ•° &quot;&quot;&quot; # ä½¿ç”¨ä¿¡å·é‡æ§åˆ¶å¹¶å‘æ•° semaphore = asyncio.Semaphore(max_concurrent) async def fetch_with_limit(url): async with semaphore: return await fetch_url(None, url) # åˆ›å»ºæ‰€æœ‰ä»»åŠ¡ tasks = [fetch_with_limit(url) for url in urls] # å¹¶å‘æ‰§è¡Œ start = time.time() results = await asyncio.gather(*tasks) elapsed = time.time() - start print(f&quot;\\nçˆ¬å– &#123;len(urls)&#125; ä¸ªURLè€—æ—¶: &#123;elapsed:.2f&#125;ç§’&quot;) return results# ============ äº‹ä»¶å¾ªç¯ç®¡ç† ============def run_async_function(): &quot;&quot;&quot;è¿è¡Œå¼‚æ­¥å‡½æ•°çš„æ ‡å‡†æ–¹å¼ï¼ˆPython 3.7+ï¼‰&quot;&quot;&quot; # æ–¹å¼1ï¼šasyncio.run() - æ¨è result = asyncio.run(hello()) # æ–¹å¼2ï¼šè·å–äº‹ä»¶å¾ªç¯ï¼ˆè¿‡æ—¶ï¼‰ # loop = asyncio.get_event_loop() # loop.run_until_complete(hello())# ============ é”™è¯¯å¤„ç† ============async def task_with_error(): &quot;&quot;&quot;å¯èƒ½å‡ºé”™çš„ä»»åŠ¡&quot;&quot;&quot; await asyncio.sleep(1) raise ValueError(&quot;æ¨¡æ‹Ÿé”™è¯¯&quot;)async def error_handling_example(): &quot;&quot;&quot;é”™è¯¯å¤„ç†ç¤ºä¾‹&quot;&quot;&quot; try: await task_with_error() except ValueError as e: print(f&quot;æ•è·åˆ°é”™è¯¯: &#123;e&#125;&quot;)# ============ ä¸»ç¨‹åºï¼šæ¼”ç¤ºæ‰€æœ‰åŠŸèƒ½ ============async def main(): &quot;&quot;&quot;ä¸»å‡½æ•° - æ¼”ç¤ºæ‰€æœ‰å¼‚æ­¥åŠŸèƒ½&quot;&quot;&quot; print(&quot;=&quot; * 50) print(&quot;1. åŸºç¡€å¼‚æ­¥å‡½æ•°&quot;) print(&quot;=&quot; * 50) await hello() print(&quot;\\n&quot; + &quot;=&quot; * 50) print(&quot;2. å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡&quot;) print(&quot;=&quot; * 50) results = await fetch_multiple_urls() print(&quot;\\n&quot; + &quot;=&quot; * 50) print(&quot;3. åå°ä»»åŠ¡ç¤ºä¾‹&quot;) print(&quot;=&quot; * 50) await background_task_example() print(&quot;\\n&quot; + &quot;=&quot; * 50) print(&quot;4. å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨&quot;) print(&quot;=&quot; * 50) await async_context_manager() print(&quot;\\n&quot; + &quot;=&quot; * 50) print(&quot;5. å¼‚æ­¥è¿­ä»£å™¨&quot;) print(&quot;=&quot; * 50) await async_iterator_example() print(&quot;\\n&quot; + &quot;=&quot; * 50) print(&quot;6. å¼‚æ­¥çˆ¬è™« - 3ä¸ªå¹¶å‘&quot;) print(&quot;=&quot; * 50) urls = [f&quot;http://api&#123;i&#125;.com&quot; for i in range(10)] await async_crawler(urls, max_concurrent=3) print(&quot;\\n&quot; + &quot;=&quot; * 50) print(&quot;7. é”™è¯¯å¤„ç†&quot;) print(&quot;=&quot; * 50) await error_handling_example()# ============ ç»ƒä¹ é¢˜ ============async def exercise_1_producer_consumer(): &quot;&quot;&quot; ç»ƒä¹ 1ï¼šç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ å®ç°ä¸€ä¸ªä½¿ç”¨asyncio.Queueçš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€… &quot;&quot;&quot; queue = asyncio.Queue() async def producer(): for i in range(5): print(f&quot;ç”Ÿäº§: &#123;i&#125;&quot;) await queue.put(i) await asyncio.sleep(0.5) async def consumer(): while True: item = await queue.get() print(f&quot;æ¶ˆè´¹: &#123;item&#125;&quot;) queue.task_done() await asyncio.sleep(1) # åˆ›å»ºä»»åŠ¡ producer_task = asyncio.create_task(producer()) consumer_task = asyncio.create_task(consumer()) # ç­‰å¾…ç”Ÿäº§è€…å®Œæˆ await producer_task # ç­‰å¾…é˜Ÿåˆ—å¤„ç†å®Œæˆ await queue.join() # å–æ¶ˆæ¶ˆè´¹è€… consumer_task.cancel()async def exercise_2_retry_with_backoff(): &quot;&quot;&quot; ç»ƒä¹ 2ï¼šå¸¦é‡è¯•å’Œé€€é¿çš„å¼‚æ­¥æ“ä½œ å®ç°æŒ‡æ•°é€€é¿é‡è¯•æœºåˆ¶ &quot;&quot;&quot; attempt = 0 async def unstable_operation(): nonlocal attempt attempt += 1 # å‰3æ¬¡å¤±è´¥ï¼Œç¬¬4æ¬¡æˆåŠŸ if attempt &lt; 4: raise ConnectionError(f&quot;å°è¯• &#123;attempt&#125; å¤±è´¥&quot;) return &quot;æˆåŠŸ!&quot; max_retries = 5 base_delay = 1 for retry in range(max_retries): try: result = await unstable_operation() print(f&quot;âœ“ æˆåŠŸ: &#123;result&#125;&quot;) break except ConnectionError as e: if retry == max_retries - 1: raise delay = base_delay * (2 ** retry) # æŒ‡æ•°é€€é¿ print(f&quot;âœ— &#123;e&#125;ï¼Œ&#123;delay&#125;ç§’åé‡è¯•...&quot;) await asyncio.sleep(delay)if __name__ == &quot;__main__&quot;: # è¿è¡Œä¸»ç¨‹åº asyncio.run(main()) # å–æ¶ˆæ³¨é‡Šä»¥è¿è¡Œç»ƒä¹  # asyncio.run(exercise_1_producer_consumer()) # asyncio.run(exercise_2_retry_with_backoff())","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://lyricsz1115.github.io/categories/%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"python","slug":"python","permalink":"https://lyricsz1115.github.io/tags/python/"}]}],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"https://lyricsz1115.github.io/categories/%E9%9A%8F%E7%AC%94/"},{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://lyricsz1115.github.io/categories/%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://lyricsz1115.github.io/tags/%E7%94%9F%E6%B4%BB/"},{"name":"python","slug":"python","permalink":"https://lyricsz1115.github.io/tags/python/"}]}